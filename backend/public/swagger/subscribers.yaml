paths:
  /subscribers:
    get:
      tags:
        - Subscribers
      summary: Get a list of Subscribers from the Entitlement Service.
      description: Returns a list of Subscribers.
      operationId: getSubscribers
      responses:
        "200":
          description: Successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/definitions/Subscriber"
        "400":
          description: Invalid credentials supplied
        "404":
          description: Resource not found
        "405":
          description: Validation exception
    post:
      tags:
        - Subscribers
      summary: Post a new Subscriber to the Entitlement Service.
      description: Post a new Subscriber with the associated Products and Entitlements.
      operationId: postSubscriber
      responses:
        "200":
          description: Successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/definitions/Subscriber"
        "400":
          description: Invalid credentials supplied
        "404":
          description: Resource not found
        "405":
          description: Validation exception

  /subscribers/{id}:
    get:
      tags:
        - Subscribers
      summary: Finds a Subscriber by ID
      description: Returns a Subscriber's information based on the Subscriber ID.  In the case of Entitlements and Products, the end_date is when the Subscriber's Entitlement will end not the date the Product/Entitlement was derecated.
      operationId: findSubscriberById
      parameters:
        - name: id
          in: path
          description: Unique integer ID for the Subscriber within the Entitlement Service.
          required: true
          schema:
            type: integer
            minimum: 0
      responses:
        "200":
          description: successful operation
          content:
            application/json:
              schema:
                $ref: "#/definitions/SubscriberAll"
        "400":
          description: Invalid status value
        "404":
          description: Subscriber not found
    put:
      tags:
        - Subscribers
      summary: Updates a Subscriber by ID
      description: Updates a Subscriber's information based on the Subscriber ID.
      operationId: updateSubscriberById
      parameters:
        - name: id
          in: path
          description: Unique integer ID for the Subscriber within the Entitlement Service.
          required: true
          schema:
            type: integer
            minimum: 0
      responses:
        "200":
          description: successful operation
          content:
            application/json:
              schema:
                $ref: "#/definitions/SubscriberAll"
        "400":
          description: Invalid status value
        "404":
          description: Subscriber not found
    delete:
      tags:
        - Subscribers
      summary: Delete a Subscriber by ID
      description: Sets a Subscriber to in active and sets the end date based on the Subscriber ID.
      operationId: findSubscriberById
      parameters:
        - name: id
          in: path
          description: Unique integer ID for the Subscriber within the Entitlement Service.
          required: true
          schema:
            type: integer
            minimum: 0
      responses:
        "200":
          description: successful operation
          content:
            application/json:
              schema:
                $ref: "#/definitions/Subscriber"
        "400":
          description: Invalid status value
        "404":
          description: Subscriber not found
          
definitions:
  SubscriberAll:
    allOf:
      - $ref: '#/definitions/Subscriber'
      - type: object
        properties:
          entitlements:
            description: An array of associated Entitlements.
            type: array
            items:
              $ref: "#/definitions/Entitlement"
          products:
            description: An array of associated Products.
            type: array
            items:
              $ref: "#/definitions/Product" 
  Subscriber:
    type: object
    properties:
      id:
        type: integer
        format: int64
        description: Unique integer ID assigned to the Subscriber.
        example: 10
      payment_id:
        type: string
        example: user_O3FvulwP4Ce2R9
        description: Unique identifier generated by the Payment Partner.
      payment_processor:
        type: string
        maximum: 32
        description: Friendly name of the payment processor where the Subscriber made payments.
        example: Stripe
      payment_session_id:
        type: string
        maximum: 256
        description: Payment processor's session token for the user to be used to restart the payment session for updates.(If Applicable)
        example: googhydr-20&ref=pd_sl_13v1ksul7h_e409994345975&hvdev
      name:
        type: string
        maximum: 256
        minimum: 4
        description: Friendly name of the Subscriber.
        example: Jon Smith
      unique_identifier:
        type: string
        format: uuid
        maximum: 40
        pattern: '[0-9a-fA-F]{8}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{12}'
        example: 1ed55455-d561-52ea-a82c-22b83f7f1155
        description: Unique indentifier assigned to the Subscriber by the Entitlement Service.
      is_active:
        type: boolean
        description: Is the Subscriber active or in active with in the Entitlement Service.
      start_date:
        type: string
        format: date-time
        example: 2023-08-10
        description: The date the Subscriber was added to the Entitlement Service.
        nullable: false
      end_date:
        type: string
        format: date-time
        example: 2024-08-10
        description: The date the Subscriber was 'removed' from the Entitlement Service.
        nullable: true